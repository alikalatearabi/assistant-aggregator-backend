
Testing blocking response mode request...
Validating [test_blocking_response_mode] response...
Received response: [<Response [201 Created]>]
Response data in json: [{'event': 'message', 'task_id': 'task_1761088769218_actiiegw6', 'id': 'msg_1761088769218_v122n7x0v', 'message_id': 'msg_1761088769218_v122n7x0v', 'conversation_id': 'conv_1761088769218_33dn3w497', 'mode': 'blocking', 'answer': 'This is a mock response from the AI assistant. In a real implementation, this would contain the actual AI-generated response based on your query.', 'metadata': {'retriever_resources': [{'position': 1, 'dataset_id': 'dataset_001', 'dataset_name': 'Knowledge Base', 'document_id': 'doc_001', 'document_name': 'Company Policies', 'segment_id': 'seg_001', 'score': 0.95, 'content': 'This is relevant content from the knowledge base that was retrieved to answer your question.'}]}, 'created_at': 1761088769218}]
[WARNING]: (test_blocking_response_mode) Error with status=[None], code=[unknown] not found in error list.
[OK]: (test_blocking_response_mode) Field [event] validated successfully.
[OK]: (test_blocking_response_mode) Field [task_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [id] validated successfully.
[OK]: (test_blocking_response_mode) Field [message_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [conversation_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [mode] validated successfully.
[OK]: (test_blocking_response_mode) Field [answer] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/position] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/dataset_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/dataset_name] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/document_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/document_name] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/segment_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/score] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/content] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata] validated successfully.
[OK]: (test_blocking_response_mode) Field [created_at] validated successfully.
[OK]: test_blocking_response_mode PASSED ✅
======================================================

Testing invalid API_KEY request...
Validating [invalid_api_key] response...
Received response: [<Response [401 Unauthorized]>]
Response data in json: [{'message': 'Invalid API key', 'error': 'Unauthorized', 'statusCode': 401}]
[OK]: (test_invalid_api_key) NestJS error format validated (statusCode: 401)
[OK]: test_invalid_api_key PASSED ✅
======================================================

Testing invalid USER_ID request...
Validating [test_invalid_user_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'message': ['inputs.similarityThreshold should not be empty', 'inputs.similarityThreshold must be a string', 'inputs.contextCount must not be less than 0', 'inputs.contextCount must be an integer number', 'responseMode must be one of the following values: streaming, blocking', 'user must be a mongodb id', 'autoGeneratedName must be a boolean value'], 'error': 'Bad Request', 'statusCode': 400}]
[OK]: (test_invalid_user_id) NestJS error format validated (statusCode: 400)
[OK]: test_invalid_user_id PASSED ✅
======================================================

Testing test_missing_user_id in request...
Validating [test_missing_user_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'message': ['inputs.similarityThreshold should not be empty', 'inputs.similarityThreshold must be a string', 'inputs.contextCount must not be less than 0', 'inputs.contextCount must be an integer number', 'responseMode must be one of the following values: streaming, blocking', 'user must be a mongodb id', 'autoGeneratedName must be a boolean value'], 'error': 'Bad Request', 'statusCode': 400}]
[OK]: (test_missing_user_id) NestJS error format validated (statusCode: 400)
[OK]: test_missing_user_id PASSED ✅
======================================================

Testing test_missing_inputs in request...
Validating [test_missing_inputs] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'message': ['responseMode must be one of the following values: streaming, blocking', 'autoGeneratedName must be a boolean value'], 'error': 'Bad Request', 'statusCode': 400}]
[OK]: (test_missing_inputs) NestJS error format validated (statusCode: 400)
[OK]: test_missing_inputs PASSED ✅
======================================================

Testing test_missing_query in request...
Validating [test_missing_query] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'message': ['query should not be empty', 'query must be a string', 'inputs.similarityThreshold should not be empty', 'inputs.similarityThreshold must be a string', 'inputs.contextCount must not be less than 0', 'inputs.contextCount must be an integer number', 'responseMode must be one of the following values: streaming, blocking', 'autoGeneratedName must be a boolean value'], 'error': 'Bad Request', 'statusCode': 400}]
[OK]: (test_missing_query) NestJS error format validated (statusCode: 400)
[OK]: test_missing_query PASSED ✅
======================================================

Testing streaming response mode request...
Validating [streaming_response_mode] response...
Received event: [message]
[OK]: (test_streaming_response_mode) Field [event] validated successfully.
[OK]: (test_streaming_response_mode) Field [task_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [message_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [conversation_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [answer] validated successfully.
[OK]: (test_streaming_response_mode) Field [created_at] validated successfully.
Received event: [message_end]
[OK]: (test_streaming_response_mode) Field [event] validated successfully.
[OK]: (test_streaming_response_mode) Field [task_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [id] validated successfully.
[OK]: (test_streaming_response_mode) Field [message_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [conversation_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/position] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/dataset_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/dataset_name] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/document_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/document_name] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/segment_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/score] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/content] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata] validated successfully.
[OK]: test_streaming_response_mode PASSED ✅
======================================================

Testing missing conversation id request...
Validating [test_missing_conversation_id] response...
Received response: [<Response [201 Created]>]
Response data in json: [{'event': 'message', 'task_id': 'task_1761088775897_4b5ux0gfm', 'id': 'msg_1761088775897_86k3mfh1n', 'message_id': 'msg_1761088775897_86k3mfh1n', 'conversation_id': 'conv_1761088775897_vli9a2mxg', 'mode': 'blocking', 'answer': 'This is a mock response from the AI assistant. In a real implementation, this would contain the actual AI-generated response based on your query.', 'metadata': {'retriever_resources': [{'position': 1, 'dataset_id': 'dataset_001', 'dataset_name': 'Knowledge Base', 'document_id': 'doc_001', 'document_name': 'Company Policies', 'segment_id': 'seg_001', 'score': 0.95, 'content': 'This is relevant content from the knowledge base that was retrieved to answer your question.'}]}, 'created_at': 1761088775897}]
[WARNING]: (test_missing_conversation_id) Error with status=[None], code=[unknown] not found in error list.
[OK]: (test_missing_conversation_id) Field [event] validated successfully.
[OK]: (test_missing_conversation_id) Field [task_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [id] validated successfully.
[OK]: (test_missing_conversation_id) Field [message_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [conversation_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [mode] validated successfully.
[OK]: (test_missing_conversation_id) Field [answer] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/position] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/dataset_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/dataset_name] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/document_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/document_name] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/segment_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/score] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/content] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata] validated successfully.
[OK]: (test_missing_conversation_id) Field [created_at] validated successfully.
[OK]: test_missing_conversation_id PASSED ✅
======================================================
