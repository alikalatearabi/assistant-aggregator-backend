
Testing blocking response mode request...
Validating [test_blocking_response_mode] response...
Received response: [<Response [200 OK]>]
Response data in json: [{'event': 'message', 'task_id': 'task_1761114473778_z9i5fl5gs', 'id': 'msg_1761114473778_lm0tdog59', 'message_id': 'msg_1761114473778_lm0tdog59', 'conversation_id': 'conv_1761114473778_wbqtzg8bn', 'mode': 'blocking', 'answer': 'This is a mock response from the AI assistant. In a real implementation, this would contain the actual AI-generated response based on your query.', 'metadata': {'retriever_resources': [{'position': 1, 'dataset_id': 'dataset_001', 'dataset_name': 'Knowledge Base', 'document_id': 'doc_001', 'document_name': 'Company Policies', 'segment_id': 'seg_001', 'score': 0.95, 'content': 'This is relevant content from the knowledge base that was retrieved to answer your question.'}]}, 'created_at': 1761114473778}]
[OK]: (test_blocking_response_mode) Field [event] validated successfully.
[OK]: (test_blocking_response_mode) Field [task_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [id] validated successfully.
[OK]: (test_blocking_response_mode) Field [message_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [conversation_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [mode] validated successfully.
[OK]: (test_blocking_response_mode) Field [answer] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/position] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/dataset_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/dataset_name] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/document_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/document_name] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/segment_id] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/score] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources/content] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata/retriever_resources] validated successfully.
[OK]: (test_blocking_response_mode) Field [metadata] validated successfully.
[OK]: (test_blocking_response_mode) Field [created_at] validated successfully.
[OK]: test_blocking_response_mode PASSED ✅
======================================================

Testing invalid API_KEY request...
Validating [invalid_api_key] response...
Received response: [<Response [401 Unauthorized]>]
Response data in json: [{'status': 401, 'code': 'unauthorized', 'message': 'Invalid API key'}]
[OK]: (test_invalid_api_key) Field [status] validated successfully.
[OK]: (test_invalid_api_key) Field [code] validated successfully.
[OK]: (test_invalid_api_key) Field [message] validated successfully.
[OK]: test_invalid_api_key PASSED ✅
======================================================

Testing invalid USER_ID request...
Validating [test_invalid_user_id] response...
Received response: [<Response [401 Unauthorized]>]
Response data in json: [{'status': 401, 'code': 'unauthorized', 'message': 'User ID does not match API key'}]
[OK]: (test_invalid_user_id) Field [status] validated successfully.
[OK]: (test_invalid_user_id) Field [code] validated successfully.
[OK]: (test_invalid_user_id) Field [message] validated successfully.
[OK]: test_invalid_user_id PASSED ✅
======================================================

Testing test_missing_user_id in request...
Validating [test_missing_user_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'User ID is required'}]
[OK]: (test_missing_user_id) Field [status] validated successfully.
[OK]: (test_missing_user_id) Field [code] validated successfully.
[OK]: (test_missing_user_id) Field [message] validated successfully.
[OK]: test_missing_user_id PASSED ✅
======================================================

Testing test_missing_inputs in request...
Validating [test_missing_inputs] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'Inputs object is required'}]
[OK]: (test_missing_inputs) Field [status] validated successfully.
[OK]: (test_missing_inputs) Field [code] validated successfully.
[OK]: (test_missing_inputs) Field [message] validated successfully.
[OK]: test_missing_inputs PASSED ✅
======================================================

Testing test_missing_query in request...
Validating [test_missing_query] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'query should not be empty, query must be a string'}]
[OK]: (test_missing_query) Field [status] validated successfully.
[OK]: (test_missing_query) Field [code] validated successfully.
[OK]: (test_missing_query) Field [message] validated successfully.
[OK]: test_missing_query PASSED ✅
======================================================

Testing streaming response mode request...
Validating [streaming_response_mode] response...
Received event: [message]
[OK]: (test_streaming_response_mode) Field [event] validated successfully.
[OK]: (test_streaming_response_mode) Field [task_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [message_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [conversation_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [answer] validated successfully.
[OK]: (test_streaming_response_mode) Field [created_at] validated successfully.
Received event: [message_end]
[OK]: (test_streaming_response_mode) Field [event] validated successfully.
[OK]: (test_streaming_response_mode) Field [task_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [id] validated successfully.
[OK]: (test_streaming_response_mode) Field [message_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [conversation_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/position] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/dataset_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/dataset_name] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/document_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/document_name] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/segment_id] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/score] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources/content] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata/retriever_resources] validated successfully.
[OK]: (test_streaming_response_mode) Field [metadata] validated successfully.
[OK]: test_streaming_response_mode PASSED ✅
======================================================

Testing missing conversation id request...
Validating [test_missing_conversation_id] response...
Received response: [<Response [200 OK]>]
Response data in json: [{'event': 'message', 'task_id': 'task_1761114474012_i1pxo13gz', 'id': 'msg_1761114474012_qjfnymgk0', 'message_id': 'msg_1761114474012_qjfnymgk0', 'conversation_id': 'conv_1761114474012_m18aeugp9', 'mode': 'blocking', 'answer': 'This is a mock response from the AI assistant. In a real implementation, this would contain the actual AI-generated response based on your query.', 'metadata': {'retriever_resources': [{'position': 1, 'dataset_id': 'dataset_001', 'dataset_name': 'Knowledge Base', 'document_id': 'doc_001', 'document_name': 'Company Policies', 'segment_id': 'seg_001', 'score': 0.95, 'content': 'This is relevant content from the knowledge base that was retrieved to answer your question.'}]}, 'created_at': 1761114474012}]
[OK]: (test_missing_conversation_id) Field [event] validated successfully.
[OK]: (test_missing_conversation_id) Field [task_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [id] validated successfully.
[OK]: (test_missing_conversation_id) Field [message_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [conversation_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [mode] validated successfully.
[OK]: (test_missing_conversation_id) Field [answer] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/position] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/dataset_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/dataset_name] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/document_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/document_name] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/segment_id] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/score] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources/content] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata/retriever_resources] validated successfully.
[OK]: (test_missing_conversation_id) Field [metadata] validated successfully.
[OK]: (test_missing_conversation_id) Field [created_at] validated successfully.
[OK]: test_missing_conversation_id PASSED ✅
======================================================

Testing blocking response mode request...

Testing blocking response mode request...

Testing blocking response mode request...

Testing blocking response mode request...
Validating [test_blocking_response_mode] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[WARNING]: (test_blocking_response_mode) responded with error and evaluation was performed on the error response (PLEASE FIX IT)
[OK]: (test_blocking_response_mode) Field [status] validated successfully.
[OK]: (test_blocking_response_mode) Field [code] validated successfully.
[OK]: (test_blocking_response_mode) Field [message] validated successfully.
[OK]: test_blocking_response_mode PASSED ✅
======================================================

Testing invalid API_KEY request...
Validating [invalid_api_key] response...
Received response: [<Response [401 Unauthorized]>]
Response data in json: [{'status': 401, 'code': 'unauthorized', 'message': 'Invalid API key'}]
[OK]: (test_invalid_api_key) Field [status] validated successfully.
[OK]: (test_invalid_api_key) Field [code] validated successfully.
[OK]: (test_invalid_api_key) Field [message] validated successfully.
[OK]: test_invalid_api_key PASSED ✅
======================================================

Testing invalid USER_ID request...
Validating [test_invalid_user_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[OK]: (test_invalid_user_id) Field [status] validated successfully.
[OK]: (test_invalid_user_id) Field [code] validated successfully.
[OK]: (test_invalid_user_id) Field [message] validated successfully.
[ERROR]: (test_invalid_user_id) Invalid response for invalid user ID
[ERROR]: test_invalid_user_id FAILED ❌
======================================================

Testing test_missing_user_id in request...
Validating [test_missing_user_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[OK]: (test_missing_user_id) Field [status] validated successfully.
[OK]: (test_missing_user_id) Field [code] validated successfully.
[OK]: (test_missing_user_id) Field [message] validated successfully.
[OK]: test_missing_user_id PASSED ✅
======================================================

Testing test_missing_inputs in request...
Validating [test_missing_inputs] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs should not be empty, think_level should not be empty, think_level must be a string'}]
[OK]: (test_missing_inputs) Field [status] validated successfully.
[OK]: (test_missing_inputs) Field [code] validated successfully.
[OK]: (test_missing_inputs) Field [message] validated successfully.
[OK]: test_missing_inputs PASSED ✅
======================================================

Testing test_missing_query in request...
Validating [test_missing_query] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'query should not be empty, query must be a string, inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[OK]: (test_missing_query) Field [status] validated successfully.
[OK]: (test_missing_query) Field [code] validated successfully.
[OK]: (test_missing_query) Field [message] validated successfully.
[OK]: test_missing_query PASSED ✅
======================================================

Testing streaming response mode request...
Validating [streaming_response_mode] response...
[ERROR]: (test_streaming_response_mode) Streaming mode produced no events
[ERROR]: test_streaming_response_mode FAILED ❌
======================================================

Testing missing conversation id request...
Validating [test_missing_conversation_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[ERROR]: (test_missing_conversation_id) Missing field [event] in response
[ERROR]: (test_missing_conversation_id) Missing field [task_id] in response
[ERROR]: (test_missing_conversation_id) Missing field [id] in response
[ERROR]: (test_missing_conversation_id) Missing field [message_id] in response
[ERROR]: (test_missing_conversation_id) Missing field [conversation_id] in response
[ERROR]: (test_missing_conversation_id) Missing field [mode] in response
[ERROR]: (test_missing_conversation_id) Missing field [answer] in response
[ERROR]: (test_missing_conversation_id) Missing field [metadata] in response
[ERROR]: (test_missing_conversation_id) Missing field [created_at] in response
[ERROR]: (test_missing_conversation_id) conversation_id not present in response
[ERROR]: test_missing_conversation_id FAILED ❌
======================================================

Testing blocking response mode request...
Validating [test_blocking_response_mode] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[WARNING]: (test_blocking_response_mode) responded with error and evaluation was performed on the error response (PLEASE FIX IT)
[OK]: (test_blocking_response_mode) Field [status] validated successfully.
[OK]: (test_blocking_response_mode) Field [code] validated successfully.
[OK]: (test_blocking_response_mode) Field [message] validated successfully.
[OK]: test_blocking_response_mode PASSED ✅
======================================================

Testing invalid API_KEY request...
Validating [invalid_api_key] response...
Received response: [<Response [401 Unauthorized]>]
Response data in json: [{'status': 401, 'code': 'unauthorized', 'message': 'Invalid API key'}]
[OK]: (test_invalid_api_key) Field [status] validated successfully.
[OK]: (test_invalid_api_key) Field [code] validated successfully.
[OK]: (test_invalid_api_key) Field [message] validated successfully.
[OK]: test_invalid_api_key PASSED ✅
======================================================

Testing invalid USER_ID request...
Validating [test_invalid_user_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[OK]: (test_invalid_user_id) Field [status] validated successfully.
[OK]: (test_invalid_user_id) Field [code] validated successfully.
[OK]: (test_invalid_user_id) Field [message] validated successfully.
[ERROR]: (test_invalid_user_id) Invalid response for invalid user ID
[ERROR]: test_invalid_user_id FAILED ❌
======================================================

Testing test_missing_user_id in request...
Validating [test_missing_user_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[OK]: (test_missing_user_id) Field [status] validated successfully.
[OK]: (test_missing_user_id) Field [code] validated successfully.
[OK]: (test_missing_user_id) Field [message] validated successfully.
[OK]: test_missing_user_id PASSED ✅
======================================================

Testing test_missing_inputs in request...
Validating [test_missing_inputs] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs should not be empty, think_level should not be empty, think_level must be a string'}]
[OK]: (test_missing_inputs) Field [status] validated successfully.
[OK]: (test_missing_inputs) Field [code] validated successfully.
[OK]: (test_missing_inputs) Field [message] validated successfully.
[OK]: test_missing_inputs PASSED ✅
======================================================

Testing test_missing_query in request...
Validating [test_missing_query] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'query should not be empty, query must be a string, inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[OK]: (test_missing_query) Field [status] validated successfully.
[OK]: (test_missing_query) Field [code] validated successfully.
[OK]: (test_missing_query) Field [message] validated successfully.
[OK]: test_missing_query PASSED ✅
======================================================

Testing streaming response mode request...
Validating [streaming_response_mode] response...
[ERROR]: (test_streaming_response_mode) Streaming mode produced no events
[ERROR]: test_streaming_response_mode FAILED ❌
======================================================

Testing missing conversation id request...
Validating [test_missing_conversation_id] response...
Received response: [<Response [400 Bad Request]>]
Response data in json: [{'status': 400, 'code': 'invalid_param', 'message': 'inputs.similarityThreshold should not be empty, inputs.similarityThreshold must be a string, inputs.contextCount must not be less than 0, inputs.contextCount must be an integer number, think_level should not be empty, think_level must be a string'}]
[ERROR]: (test_missing_conversation_id) Missing field [event] in response
[ERROR]: (test_missing_conversation_id) Missing field [task_id] in response
[ERROR]: (test_missing_conversation_id) Missing field [id] in response
[ERROR]: (test_missing_conversation_id) Missing field [message_id] in response
[ERROR]: (test_missing_conversation_id) Missing field [conversation_id] in response
[ERROR]: (test_missing_conversation_id) Missing field [mode] in response
[ERROR]: (test_missing_conversation_id) Missing field [answer] in response
[ERROR]: (test_missing_conversation_id) Missing field [metadata] in response
[ERROR]: (test_missing_conversation_id) Missing field [created_at] in response
[ERROR]: (test_missing_conversation_id) conversation_id not present in response
[ERROR]: test_missing_conversation_id FAILED ❌
======================================================
